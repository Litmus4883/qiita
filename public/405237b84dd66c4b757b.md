---
title: Laravel10ã§ã€JavaScriptã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒèª­ã¿è¾¼ã¾ã‚Œãªã‹ã£ãŸæ™‚ã®è§£æ±ºäº‹ä¾‹
tags:
  - JavaScript
  - vite
  - laravel10
private: false
updated_at: '2024-03-28T13:49:44+09:00'
id: 405237b84dd66c4b757b
organization_url_name: null
slide: false
ignorePublish: false
---
ã“ã‚“ã«ã¡ã¯ï¼ğŸ˜Š

æ–‡ç³»ã§ã™ï¼ã¨ã‚‚ãªãŒãŸã„ãŒã§ã™ï¼

ä»Šå›ã¯ã€Laravel10ã§JavaScriptã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒèª­ã¿è¾¼ã¾ã‚Œãªã‹ã£ãŸæ™‚ã®è§£æ±ºäº‹ä¾‹ã‚’ã”ç´¹ä»‹ã—ã¾ã™ï¼

## é–‹ç™ºç’°å¢ƒ
- Laravel10
- aws cloud9

## å‰æ
## èª²é¡Œ
- laravelã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§viteã‚’åˆ©ç”¨ã—javascriptã§è¨˜è¿°ã‚’ã—ãŸã¨ã“ã‚ã€åŸºæœ¬çš„ã«ã¯å•é¡Œãªãä½œå‹•ã—ã¾ã—ãŸãŒã€ã‚ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã®ã¿ãŒå®Ÿè¡Œã•ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚ğŸ¤·â€â™‚ï¸
- å®Ÿè¡Œã•ã‚Œãªã‹ã£ãŸãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€ç§ãŒå®šç¾©ã—ãŸloadImage()ãƒ¡ã‚½ãƒƒãƒ‰ã§ã™ã€‚
- ãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè¡Œã¯ã€htmlã®<input>ã‚¿ã‚°ã®onchangeå±æ€§ã§è¡Œã£ã¦ã„ã¾ã™ã€‚

ä¿®æ­£å‰ã®htmlã®è¨˜è¿°
```html
<div class="post_image">
    <input type="file" name="image" accept="image/*" onchange="loadImage(this);"/> <!-- onchangeå±æ€§-->
    <div id="preview"></div>
</div>
```
ä¿®æ­£å‰ã®javascriptã®è¨˜è¿°
```javascript
function loadImage(obj)// loadImage()ãƒ¡ã‚½ãƒƒãƒ‰
{
    const preview = document.querySelector("#preview");
    
    preview.insertAdjacentHTML("beforebegin", "<p>ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</p>");
    
    for (let i = 0; i < obj.files.length; i++) {
        const fileReader = new FileReader();
        
        fileReader.onload = (event) => {
            document.querySelector("#preview").insertAdjacentHTML("afterbegin", '<img src="' + event.target.result + '"/>');
        };
        
        fileReader.readAsDataURL(obj.files[i]);
    }
}
```
## è§£æ±ºäº‹ä¾‹
- onchangeå±æ€§ã‚’ä½¿ã‚ãªã„æ–¹æ³•ã‚’å–ã‚Šã¾ã—ãŸã€‚ğŸ˜Š
- htmlã®<input>ã‚¿ã‚°ã«id="imageInput"ã‚’ã‚‚ãŸã›ã€javascriptãƒ•ã‚¡ã‚¤ãƒ«ã§changeã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’ä½¿ç”¨ã—ã¾ã—ãŸã€‚
- å…·ä½“çš„ãªè¨˜è¿°ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚
ä¿®æ­£å¾Œã®htmlã®è¨˜è¿°
```html
<div class="post_image">
    <input type="file" name="image" accept="image/*" id="imageInput"/><!-- onchangeå±æ€§->idå±æ€§-->
    <div id="preview"></div>
</div>
```
ä¿®æ­£å¾Œã®javascriptã®è¨˜è¿°
```javascript
function loadImage(obj)// å¤‰æ›´ãªã—
{
    const preview = document.querySelector("#preview");
    
    preview.insertAdjacentHTML("beforebegin", "<p>ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</p>");
    
    for (let i = 0; i < obj.files.length; i++) {
        const fileReader = new FileReader();
        
        fileReader.onload = (event) => {
            document.querySelector("#preview").insertAdjacentHTML("afterbegin", '<img src="' + event.target.result + '"/>');
        };
        
        fileReader.readAsDataURL(obj.files[i]);
    }
}

const imageInput = document.querySelector("#imageInput");// è¿½åŠ 
imageInput.addEventListener("change", function() {
    loadImage(this);
});
```
## èª¬æ˜
- onchangeå±æ€§ãŒä½¿ãˆãªã„ç†ç”±ã‚’èª¿ã¹ã¾ã—ãŸãŒã€åˆ†ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ğŸ˜¢
- å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã§onchangeã§æ¤œç´¢ã—ãŸã¨ã“ã‚onchangeã¯ãƒ’ãƒƒãƒˆã—ãªã‹ã£ãŸãŸã‚ã€onchangeå±æ€§ãŒå¤ã„è¨˜è¿°æ–¹æ³•ãªã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚
## çµè«–
- ã²ã¨ã¾ãšã€onchangeå±æ€§ã¯ä½¿ã„ã¾ã›ã‚“ï¼
## è¿½è¨˜ï¼ˆ2024/3/28ï¼‰
ã‚³ãƒ¡ãƒ³ãƒˆã§ã€Œtype="module"ã€ã¨ã„ã†ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ã„ãŸã ã„ãŸã®ã§ã€å†åº¦ã€ä¿®æ­£ã—ã¦ã¿ã¾ã—ãŸï¼
```html
<head>
 <!-- è¿½è¨˜-->
<script type="module">{!! Vite::content('resources/js/preview.js') !!}</script>
</head>
```
æ®‹å¿µãªãŒã‚‰è§£æ±ºã§ãã¾ã›ã‚“ã§ã—ãŸã€‚
ä»¥ä¸‹ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã®ã‚¨ãƒ©ãƒ¼ã§ã™ã€‚

**create:158 Uncaught ReferenceError: loadImage is not defined
    at HTMLInputElement.onchange (create:158:99)**
    
ä½•ã‹æ‰‹é•ã„ãŒã”ã–ã„ã¾ã—ãŸã‚‰ã”æŒ‡æ‘˜ã„ãŸã ã‘ã‚‹ã¨å¹¸ã„ã§ã™ã€‚ğŸ™‡â€â™‚ï¸
